{"version":3,"sources":["webpack:///webpack/bootstrap cca4a008862e83a66feb","webpack:///./src/public/javascript/utility.js","webpack:///./src/public/javascript/local_settings.js","webpack:///./src/public/javascript/api.js","webpack:///./src/public/javascript/scorecard-admin.js"],"names":["error","err","message","newDate","Date","setTime","now","dateString","toTimeString","console","log","$","text","formatAMPM","date","hours","getHours","minutes","getMinutes","seconds","getSeconds","ampm","strTime","getAuthString","username","password","auth","btoa","API_URL","getStatistics","filter","response","request","json","queueStats","getData","getReportResults","params","type","parameters","endpoint","val","url","apiURL","requestOptions","method","headers","credentials","body","JSON","stringify","fetch","then","status","notifyServer504","ok","bodyText","Error","statusText","jsonToReturnValue","getFaultStringFromData","data","getParameters","requestType","user","pass","vm","Vue","el","fields","name","defaultRefreshRate","calculatedFields","calculation","components","beforeMount","methods","updateField","field","loadFields"],"mappings":"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","file":"scorecard-admin.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 72);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap cca4a008862e83a66feb","\r\n// Send out an error alert in console and on the page.\r\nexport function error(err, message='') {\r\n    // timestamp\r\n    let newDate = new Date();\r\n    newDate.setTime(Date.now());\r\n    let dateString = newDate.toTimeString();\r\n    console.log(dateString);\r\n\r\n    // Post to page\r\n    $('#message').text(`Whoops! An error occurred. ${err.message} ${message}`);\r\n    console.log('Error log:');\r\n    console.error(err);\r\n}\r\n\r\n// Nicely formatted time\r\nexport function formatAMPM(date) {\r\n    let hours = date.getHours();\r\n    let minutes = date.getMinutes();\r\n    let seconds = date.getSeconds();\r\n    let ampm = hours >= 12 ? 'PM' : 'AM';\r\n    hours = hours % 12;\r\n    hours = hours ? hours : 12; // the hour '0' should be '12'\r\n    minutes = minutes < 10 ? '0'+minutes : minutes;\r\n    seconds = seconds < 10 ? '0'+seconds : seconds;\r\n    let strTime = hours + ':' + minutes + ':' + seconds + ' ' + ampm;\r\n    return strTime;\r\n}\r\n\r\n\r\n// Combines username and password, then encodes in Base 64. Yum!\r\nexport function getAuthString(username, password) {\r\n   let auth = username + ':' + password;\r\n   return btoa(auth);\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/public/javascript/utility.js","export const API_URL = 'http://localhost:3000/api/';\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/public/javascript/local_settings.js","import { error, getAuthString } from './utility.js';\r\nimport { API_URL } from './local_settings.js';\r\n\r\n////////////////////////////////////////////////////////////////\r\n// Functions to retrieve and extract data from Five9.\r\n// These functions interact with our server, which houses data\r\n// and formats data originating in Five9 reports.\r\n////////////////////////////////////////////////////////////////\r\n\r\n\r\n// Get agent/ACD statistics\r\nexport async function getStatistics(filter) {\r\n    const response = await request(filter, 'statistics');\r\n    return response.json();\r\n}\r\n\r\n\r\n// Get real-time stats\r\nexport async function queueStats() {\r\n    return getData({}, 'queue-stats');\r\n}\r\n\r\n\r\n/**\r\n * Get CSV string of report results from Five9\r\n * @param  {Object} params\r\n * @param  {String} type   endpoint: `maps` or `service-level`\r\n * @return {Object}        JSON data\r\n */\r\nexport function getReportResults(params, type) {\r\n    return getData(params, `reports/${type}`);\r\n}\r\n\r\n\r\n/**\r\n *  Helper function that pulls credentials from DOM, then makes request to server.\r\n * @param  {Object} parameters POSTed to server\r\n * @param  {String} endpoint   at server's API\r\n * @return {Object}            JSON data\r\n */\r\nasync function getData(parameters, endpoint) {\r\n    const auth = getAuthString($('.username').val(), $('.password').val());\r\n    parameters['authorization'] = auth;\r\n\r\n    const response = await request(parameters, endpoint);\r\n    return await response.json();\r\n}\r\n\r\n// Make a request to server with given parameters (from getParameters)\r\nasync function request(parameters, url='statistics') {\r\n    const apiURL = API_URL + url; // defined in api_url.js\r\n\r\n    const requestOptions = {\r\n        method: 'POST',\r\n        headers: {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json'\r\n        },\r\n        credentials: 'include',\r\n        body: JSON.stringify(parameters)\r\n    }\r\n\r\n    return fetch(apiURL, requestOptions)\r\n        .then(async (response) => {\r\n            if (response.status == 504) notifyServer504(parameters, url); // debugging\r\n            if (!response.ok) {\r\n                let bodyText = await response.text();\r\n                throw new Error(`Server responded with ${response.status} ${response.statusText}: ${bodyText}`);\r\n            }\r\n            return response;\r\n        }).then((response) => {\r\n            return response;\r\n        });\r\n}\r\n\r\nasync function notifyServer504() {\r\n    return fetch(API_URL + 'notify-504');\r\n}\r\n\r\n\r\n// Gets the actual returned value/data out of JSON from the server.\r\nfunction jsonToReturnValue(json, type) {\r\n    return json['env:Envelope']['env:Body'][0]['ns2:'+type+'Response'][0]['return'][0];\r\n}\r\n\r\n// takes JSON from server and returns text within 'faultstring' tag (if existant)\r\nfunction getFaultStringFromData(data) {\r\n    try {\r\n        return data['env:Envelope']['env:Body'][0]['env:Fault'][0]['faultstring'];\r\n    } catch (err) {\r\n        return '';\r\n    }\r\n}\r\n\r\n// Given a requestType, returns JSON to submit to server in POST request.\r\n// requestType should match Five9 API command.\r\nexport function getParameters(requestType) {\r\n    let params = {};\r\n    // Initiate session\r\n    if (requestType == 'setSessionParameters') {\r\n        params = {\r\n            'service': 'setSessionParameters',\r\n            'settings': [ {\r\n                'viewSettings': [\r\n                    { 'idleTimeOut': 1800 },\r\n                    { 'statisticsRange': 'CurrentDay' },\r\n                    { 'rollingPeriod': 'Minutes10' }\r\n                ]\r\n            } ]\r\n        }\r\n    }\r\n    // Get real-time call stats\r\n    if (requestType == 'getStatistics') {\r\n        params = {\r\n            'service': 'getStatistics',\r\n            'settings': [ {\r\n                'statisticType': 'ACDStatus'\r\n            } ]\r\n        }\r\n    }\r\n\r\n    // Credentials\r\n    let user = $('.username').val();\r\n    let pass = $('.password').val();\r\n    params['authorization'] = getAuthString(user, pass);\r\n\r\n    return params;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/public/javascript/api.js","import * as api from './api.js';\r\n\r\n\r\nconst vm = new Vue({\r\n    el: '#admin-app',\r\n\r\n    data: {\r\n        fields: [\r\n            { name: 'calls', defaultRefreshRate: 60 * 5 },\r\n            { name: 'handleTime', defaultRefreshRate: 60 * 5 }\r\n        ],\r\n        calculatedFields: [\r\n            { name: 'AHT', calculation: '{calls} / {handleTime}' }\r\n        ],\r\n        message: ''\r\n    },\r\n\r\n    components: {},\r\n\r\n    beforeMount: function() {\r\n        let fields = api.getFieldList();\r\n    },\r\n\r\n    methods: {\r\n        updateField: function(field) {\r\n            console.log(field);\r\n            this.message = `Updating ${field.name}...`;\r\n        },\r\n        loadFields\r\n    }\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/public/javascript/scorecard-admin.js"],"sourceRoot":""}