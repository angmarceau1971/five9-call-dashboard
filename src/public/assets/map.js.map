{"version":3,"sources":["webpack:///webpack/bootstrap e7eb73c18cec5b18c53e","webpack:///./src/public/javascript/maps-dashboard.js","webpack:///./src/public/javascript/maps.js","webpack:///./src/public/javascript/api.js","webpack:///./src/public/javascript/utility.js","webpack:///./src/public/javascript/local_settings.js"],"names":["timeout","mapSettings","display","$","document","ready","callMap","click","event","clearTimeout","startUpdatingMap","setupFilterListeners","trigger","children","currentTarget","hasClass","addClass","removeClass","change","val","refreshRate","text","updateMap","moment","format","err","error","setTimeout","params","reportTimeRange","skills","customerData","getCustomerData","callData","data","Object","keys","map","zip","zipCode","calls","filter","d","reduce","sum","customers","missing","getZipsWithoutCustomers","concat","field","keyTitle","formatLegend","d3","filterFn","minCustomers","value","keyFn","substring","rollupFn","x","callsPerCustomer","callsByZip","nest","key","rollup","entries","update","console","log","customerCount","lastUpdated","isBefore","subtract","rawData","object","item","isZipWithoutCustomers","hasOwnProperty","time","start","tz","end","relativeSelector","minutes","isNaN","Error","seconds","CallMap","create","colors","width","height","minValue","min","maxValue","max","scaleLinear","domain","extent","rangeRound","color","scaleThreshold","range","path","geoPath","svg","select","attr","drawKey","queue","defer","json","API_URL","await","usa","zipData","onReady","drawZips","drawStates","g","remove","exit","selectAll","backgroundColor","sorted","features","sort","a","b","isEmptyZip","properties","ZIP","insert","enter","append","get","o","has","invertExtent","Math","abs","call","axisBottom","tickSize","tickFormat","tickValues","getStatistics","response","request","queueStats","getData","getReportResults","type","getLookerData","lookId","getLogs","query","getUserInformation","username","updateUserTheme","newTheme","getAdminUsers","users","updateAdminUser","user","getSupervisorUsers","updateSupervisorUser","getUsers","getActiveUsers","interval","sendMessage","message","getMessages","getSentMessages","getUnreadMessages","hasRead","markMessageRead","id","_id","getFieldList","updateField","deleteField","getGoalList","getGoalsForAgentGroups","agentGroups","updateGoal","goal","deleteGoal","getLayouts","getLayoutList","updateLayout","layout","deleteLayout","getDatasources","updateDatasource","datasource","deleteDatasource","getSkillGroups","getLinkList","updateLink","link","deleteLink","getSkillJobs","updateSkillJob","job","skillStr","split","sk","trim","prop","deleteSkillJob","rebootServer","reloadData","uploadData","parameters","endpoint","url","method","apiURL","requestOptions","headers","credentials","body","JSON","stringify","fetch","then","status","notifyServer504","ok","bodyText","statusText","jsonToReturnValue","getFaultStringFromData","getParameters","requestType","newDate","Date","setTime","now","dateString","toTimeString","formatAMPM","date","hours","getHours","getMinutes","getSeconds","ampm","strTime"],"mappings":"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","file":"map.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 123);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap e7eb73c18cec5b18c53e","import { error } from './utility';\nimport * as api from './api';\nimport CallMap from './maps';\n\n// General functions to initiate the call map dashboard.\n// Uses the CallMap class defined in maps.js to draw the D3 map.\n\n// timeout to pause event loop when needed\nlet timeout = null;\nconst mapSettings = {\n    display: 'total'\n};\n\n$(document).ready(() => {\n    let callMap = new CallMap();\n\n    // listen for update button presses\n    $('.filters-wrapper .update').click(async (event) => {\n        // stop any current event loops running\n        if (timeout != null) {\n            clearTimeout(timeout);\n        }\n        // Update map every 4 minutes\n        startUpdatingMap(callMap, 4*60);\n    });\n\n    // Listen for changes to the filter settings\n    setupFilterListeners();\n\n    // Start updating on page load\n    $('.filters-wrapper .update').trigger('click');\n});\n\n\nfunction setupFilterListeners() {\n    // handle toggle for relative / absolute date filters\n    $('.date-type-toggle').children().click((event) => {\n        // Relative button was chosen\n        if ($(event.currentTarget).hasClass('relative')) {\n            // Update toggle buttons to show current selection\n            $('.date-type-toggle .relative').addClass('checked');\n            $('.date-type-toggle .absolute').removeClass('checked');\n            // Display the appropriate date selection\n            $('.date-filter-inputs.absolute').addClass('hidden');\n            $('.date-filter-inputs.relative').removeClass('hidden');\n        // Absolute button was clicked\n        } else {\n            $('.date-type-toggle .absolute').addClass('checked');\n            $('.date-type-toggle .relative').removeClass('checked');\n            $('.date-filter-inputs.relative').addClass('hidden');\n            $('.date-filter-inputs.absolute').removeClass('hidden');\n        }\n    })\n\n    // Handle selection of Today vs Last X Minutes for relative filters\n    $('.relative-date-selector').change(() => {\n        if ($('.relative-date-selector').val() == 'last-x-minutes') {\n            $('.relative-parameters-wrapper').removeClass('hidden');\n        } else {\n            $('.relative-parameters-wrapper').addClass('hidden');\n        }\n    });\n\n    // Alternate between mapping total calls or calls per customer count\n    $('.call-display-toggle').children().click((event) => {\n        // Was Total button clicked?\n        if ($(event.currentTarget).hasClass('total')) {\n            mapSettings.display = 'total';\n            $('.call-display-toggle .total').addClass('checked');\n            $('.call-display-toggle .relative').removeClass('checked');\n            // show minimum customer filter\n            $('.call-display .minimum-customers-wrapper').addClass('hidden');\n        // Relative display was chosen\n        } else {\n            mapSettings.display = 'relative';\n            $('.call-display-toggle .total').removeClass('checked');\n            $('.call-display-toggle .relative').addClass('checked');\n            $('.call-display .minimum-customers-wrapper').removeClass('hidden');\n        }\n    });\n}\n\n// Begins a loop of updating the map data every ${refreshRate} seconds\nasync function startUpdatingMap(callMap, refreshRate) {\n    try {\n        $('.message').text(`Updating...`);\n        await updateMap(callMap);\n        $('.message').text('Last updated ' + moment().format('h:mm:ss A') + '.');\n    } catch (err) {\n        error(err);\n    }\n    timeout = setTimeout(() => startUpdatingMap(callMap, refreshRate),\n                         refreshRate * 1000);\n}\n\n// Update callMap (d3 map object) based on parameters in page\nasync function updateMap(callMap) {\n    const params = reportTimeRange();\n    params.skills = $('.skills.filter').val();\n\n    // get all the datas\n    let customerData = await getCustomerData();\n    const callData = await api.getReportResults(params, 'maps');\n\n    // build data object off of customerData zip codes\n    let data = Object.keys(customerData)\n        .map((zip) => ({\n            zipCode: zip,\n            calls: callData\n                    .filter((d) => d.zipCode == zip)\n                    .reduce((sum, d) => sum + d.calls, 0),\n            customers: customerData[zip]\n        }));\n\n    // if any zips with calls are missing from customerData, add them here\n    let missing = getZipsWithoutCustomers(callData, customerData);\n    data = data.concat(missing);\n\n    // Determine the field being mapped -- total calls or per customer\n    let field;\n    if (mapSettings.display == 'total') {\n        field = 'calls';\n        callMap.keyTitle = 'Calls offered';\n        callMap.formatLegend = d3.format('d');\n    } else if (mapSettings.display == 'relative') {\n        field = 'callsPerCustomer';\n        callMap.keyTitle = 'Calls offered divided by customer base';\n        callMap.formatLegend = d3.format('.1%');\n    }\n\n    // If we're in relative display mode, the user can filter areas meeting a\n    // minimum customer count\n    let filterFn;\n    if (mapSettings.display == 'relative') {\n        let minCustomers = $('.minimum-customers').val() * 1;\n        filterFn = (d) => d.value.customers >= minCustomers;\n    } else {\n        filterFn = (d) => true;\n    }\n\n    // Key and value extractor functions\n    const keyFn = (d) => d.zipCode.substring(0, 3);\n    const rollupFn = (d) => {\n        let calls = d3.sum(d, (x) => x.calls);\n        let customers = d3.sum(d, (x) => x.customers);\n        let callsPerCustomer;\n        if (customers == 0) callsPerCustomer = 0;\n        else callsPerCustomer = calls / customers;\n        return {\n            'calls': calls,\n            'customers': customers,\n            'callsPerCustomer': callsPerCustomer\n        }\n    }\n\n    // Create the data structure in a D3-friendly way\n    let callsByZip = d3.nest()\n        .key(keyFn)\n        .rollup(rollupFn)\n        .entries(data)\n        .filter(filterFn)\n        .filter((d) => d.key != ''); // remove calls with no zipcode assigned\n\n    callMap.update(callsByZip, field, keyFn, rollupFn);\n\n    console.log('Finished updateMap() at ' + moment().format('h:mm:ss A'));\n}\n\n// Object to store customer zipcode data.\nconst customerCount = {\n    data: [],\n    // record time of last update (default to Y2K to force an update)\n    lastUpdated: moment('2000-01-01')\n};\n/**\n * Retrieve customer counts by zip code. Updates from the server every 6 hours.\n * @return {Object} in format { '<zip code here>': '31415' }\n */\nasync function getCustomerData() {\n    // reload data from server if it's been 6+ hours since the last update\n    if (customerCount.lastUpdated.isBefore(moment().subtract(6, 'hours'))) {\n        let rawData = await api.getReportResults({}, 'customers');\n\n        // Convert array of objects to a single object, with zipcode as key\n        // and customer count as volue\n        customerCount.data = rawData.reduce((object, item) => {\n            object[item.zipCode] = item.customerCount;\n            return object;\n        }, {});\n\n        customerCount.lastUpdated = moment();\n    }\n    return customerCount.data;\n}\n\n\nfunction getZipsWithoutCustomers(callData, customerData) {\n    return callData\n        .filter((d) => isZipWithoutCustomers(d.zipCode, customerData))\n        .map((d) => ({\n            zipCode: d.zipCode,\n            calls: d.calls,\n            customers: 0\n        }));\n}\n\nfunction isZipWithoutCustomers(zip, customerData) {\n    return (zip != '' && !customerData.hasOwnProperty(zip));\n}\n\n// Determines start/end times chosen by user\n// Return {start:'X',end:'Y'}\nfunction reportTimeRange() {\n    const time = {};\n    // Are we using absolute dates?\n    if ($('.date-type-toggle .absolute').hasClass('checked')) {\n        time.start = moment($('.filter.start-time').val())\n                        .tz('America/Los_Angeles')\n                        .format('YYYY-MM-DD[T]HH:mm:ss');\n        time.end   = moment($('.filter.end-time'  ).val())\n                        .tz('America/Los_Angeles')\n                        .format('YYYY-MM-DD[T]HH:mm:ss');\n    // Using relative dates\n    } else {\n        const relativeSelector = $('.relative-date-selector').val();\n        if (relativeSelector == 'today') {\n            time.start = moment().format('YYYY-MM-DD') + 'T00:00:00';\n            time.end   = moment().format('YYYY-MM-DD') + 'T23:59:59';\n        // If user specified a certain number of minutes, subtract the minutes,\n        // convert to Eastern Time, and round down to nearest 30-minute interval\n        } else if (relativeSelector == 'last-x-minutes') {\n            const minutes = $('.filter.relative-minutes').val();\n            if (isNaN(minutes)) throw new Error(`Relative minute value ${minutes} is not a number.`);\n            // Convert to server's timezone\n            let start = moment().subtract(minutes, 'm').tz('America/Los_Angeles');\n            // round down to nearest interval\n            start.subtract(start.minutes() % 30, 'minutes');\n            start.seconds(0);\n            time.start = start.format('YYYY-MM-DD[T]HH:mm:ss');\n            console.log(time.start);\n            time.end   = moment().format('YYYY-MM-DD') + 'T23:59:59';\n        } else {\n            throw new Error('Relative date selector value is ' + relativeSelector +\n                            '. Value not recognized.');\n        }\n    }\n    return time;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/public/javascript/maps-dashboard.js","import { API_URL } from './local_settings';\n\n// Map of U.S. with ZIP3 areas colored by calls offered.\n// Offers methods to create/draw the map and update when new data is received.\nexport default class CallMap {\n    /**\n     * Create and draw map on initial run\n     * @param  {Object}  data d3.nest data object with zipcode as key and fields as values\n     * @param  {String}  field to map (calls or callsPerCustomer)\n     * @return {Promise} resolves when complete\n     */\n    create(data, field) {\n        // Taken from d3.schemeBlues[9]\n        this.colors = [\"#f7fbff\", \"#deebf7\", \"#c6dbef\", \"#9ecae1\", \"#6baed6\", \"#4292c6\", \"#2171b5\", \"#08519c\", \"#08306b\"];\n\n        let width = 960,\n            height = 500;\n\n        this.calls = d3.map(data, (d) => d.key);\n        let minValue = d3.min(data, (d) => d.value[field]);\n        let maxValue = d3.max(data, (d) => d.value[field]);\n\n        this.x = d3.scaleLinear()\n            .domain(d3.extent(data, (d) => d.value[field]))\n            .rangeRound([600, 860]);\n\n        this.color = d3.scaleThreshold()\n            .domain(d3.range(0, maxValue, maxValue / 9))\n            .range(this.colors);\n\n        this.path = d3.geoPath();\n\n        this.svg = d3.select('svg')\n            .attr('width', width)\n            .attr('height', height);\n\n        // Key / legend\n        this.keyTitle = 'Calls offered';\n        this.drawKey(this.x, this.color);\n\n        return d3.queue()\n            .defer(d3.json, API_URL + 'states')\n            .defer(d3.json, API_URL + 'zip3-data')\n            .await((err, usa, zipData) => this.onReady(err, usa, zipData, field));\n    }\n\n    // Assign initial variables when map is first created and topographic\n    // data is first loaded\n    onReady(err, usa, zipData, field) {\n        this.zipData = zipData;\n        this.usa = usa;\n        this.drawZips(zipData, field);\n        this.drawStates(usa);\n    }\n\n    // Update map with new data\n    async update(data, field) {\n        // Check if this chart already exists. If not, create it.\n        if (!this.svg) return this.create(data, field);\n\n        // match calls to keys (zip codes)\n        this.calls = d3.map(data, (d) => d.key);\n\n        // update domain and range\n        let max = d3.max(data, (d) => d.value[field]);\n        this.x.domain(d3.extent(data, (d) => d.value[field]));\n        this.color.domain(d3.range(0, max, max / 9));\n\n        // Key / legend\n        // remove then redraw the color key\n        this.g.remove().exit();\n        this.drawKey(this.x, this.color);\n\n        // data - paint the state lines and zip codes\n        // clear old states and zips\n        this.svg.selectAll('.zips, .states').remove().exit();\n        // then rebuild them\n        this.drawZips(this.zipData, field);\n        this.drawStates(this.usa);\n    }\n\n    // Draw ZIP3 areas, colored by number of calls\n    // ${zipData} is GeoJSON describing the topography\n    drawZips(zipData, field) {\n        let backgroundColor = '#feffff';\n        // Sort so that areas with call data are drawn last and end up on top\n        let sorted = zipData.features.sort((a, b) => {\n            if (this.isEmptyZip(a.properties.ZIP, field)) return -1;\n            return 1;\n        });\n\n        this.svg.insert('g', '.key')\n            .attr('class', 'zips')\n          .selectAll('path')\n          .data(sorted)\n          .enter().append('path')\n            .attr('d', this.path)\n            .attr('fill', (d) => {\n                let zip = d.properties.ZIP;\n                if (this.isEmptyZip(zip, field)) return backgroundColor;\n                return this.color(this.calls.get(zip).value[field]);\n            })\n            .attr('stroke', (d) => {\n                let zip = d.properties.ZIP;\n                if (this.isEmptyZip(zip, field)) return backgroundColor;\n                return 'hsla(208, 30%, 60%, 0.5)';\n            })\n          .append('title')\n            .text((d) => {\n                let zip = d.properties.ZIP;\n                let o = { calls: 0, customers: 0, callsPerCustomer: 0 };\n                if (this.calls.has(zip)) {\n                    o = this.calls.get(zip).value;\n                }\n                return `ZIP3: ${zip}\\nCalls: ${o.calls}\\nCustomers: ${o.customers}\\nCalls divided by customer count: ${d3.format(\".2%\")(o.callsPerCustomer)}`;\n            });\n    }\n\n    /**\n     * Returns true if the zip code is not in the data or has a value equal to 0\n     * @param  {String}  zip   zip code\n     * @param  {String}  field to check in this.calls.value\n     * @return {Boolean}\n     */\n    isEmptyZip(zip, field) {\n        return (!this.calls.has(zip) || this.calls.get(zip).value[field] == 0);\n    }\n\n    // Draw the state outlines\n    drawStates(usa) {\n        this.svg.insert('g', '.key')\n            .attr('class', 'states')\n          .selectAll('path')\n          .data(usa.features)\n          .enter().append('path')\n            .attr('d', this.path);\n    }\n\n    // Draw the key/legend\n    drawKey(x, color) {\n        this.g = this.svg.append('g')\n            .attr('class', 'key')\n            .attr('transform', 'translate(0,40)');\n        this.g.selectAll('rect')\n            .data(color.range().map((d) => {\n                d = color.invertExtent(d);\n                if (d[0] == null) d[0] = x.domain()[0];\n                if (d[1] == null) d[1] = x.domain()[1];\n                return d;\n            }))\n            .enter().append('rect')\n              .attr('height', 8)\n              .attr('x', (d) => x(d[0]))\n              .attr('width', (d) => {\n                  return Math.abs(x(d[1]) - x(d[0]));\n              } )\n              .attr('fill', (d) => color(d[0]));\n\n        this.g.append('text')\n            .attr('class', 'caption')\n            .attr('x', x.range()[0])\n            .attr('y', -6)\n            .attr('fill', '#444')\n            .attr('text-anchor', 'start')\n            .attr('font-weight', 'bold')\n            .text(this.keyTitle);\n          this.g.call(d3.axisBottom(x)\n            .tickSize(13)\n            .tickFormat(this.formatLegend)\n            .tickValues(color.domain()))\n          .select('.domain')\n            .remove();\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/public/javascript/maps.js","import { error } from './utility.js';\nimport { API_URL } from './local_settings.js';\n\n////////////////////////////////////////////////////////////////\n// Functions to retrieve and extract data from Five9.\n// These functions interact with our server, which houses data\n// and formats data originating in Five9 reports.\n////////////////////////////////////////////////////////////////\n\n// Get agent/ACD statistics\nexport async function getStatistics(filter) {\n    const response = await request(filter, 'statistics');\n    return response.json();\n}\n\n// Get real-time stats\nexport async function queueStats() {\n    return getData({}, 'queue-stats');\n}\n\n/**\n * Get CSV string of report results from Five9\n * @param  {Object} params\n * @param  {String} type   endpoint: `maps` or `service-level`\n * @return {Promise -> Object}        JSON data\n */\nexport function getReportResults(params, type) {\n    return getData(params, `reports/${type}`);\n}\n\n/**\n * Pull Looker data from given Look\n * @param  {String} lookId\n * @return {Object} JSON data\n */\nexport async function getLookerData(lookId) {\n    let response = await request({lookId: lookId}, 'looker');\n    return await response.json();\n}\n\nexport async function getLogs(query) {\n    let response = await request({query: query}, 'logs');\n    return await response.json();\n}\n\n///////////////////////////////////////////////////////////////////////\n// Users\n/**\n * Return user information from username.\n * @param  {String} username if blank, will return currently logged-in user's\n *                           data\n * @return {Promise -> Object} User's object\n */\nexport async function getUserInformation(username = '') {\n    let path = username ? `users/data/${username}` : `users/data`;\n    const response = await request({}, path, 'GET');\n    return response.json();\n}\n/**\n * Set a user's theme preferences.\n * @param  {String} username\n * @param  {Object} newTheme with theme fields\n * @return {Promise -> String} response message\n */\nexport async function updateUserTheme(username, newTheme) {\n    const response = await request(\n        { username: username, newTheme: newTheme },\n        `users/theme`, 'PATCH'\n    );\n    return response.text();\n}\n\n// Admin users\nexport async function getAdminUsers() {\n    let response = await request({}, 'users/admin', 'GET');\n    let users = await response.json();\n    console.log(users)\n    return users;\n}\nexport async function updateAdminUser(user) {\n    let response = await request({user: user}, 'users/admin', 'PATCH');\n    return response.text();\n}\n\n// Supervisor users\nexport async function getSupervisorUsers() {\n    let response = await request({}, 'users/supervisor', 'GET');\n    let users = await response.json();\n    console.log(users)\n    return users;\n}\nexport async function updateSupervisorUser(user) {\n    let response = await request({user: user}, 'users/supervisor', 'PATCH');\n    return response.text();\n}\n\n// Get list of all users\nexport async function getUsers() {\n    let response = await request({}, 'users', 'GET');\n    return response.json();\n}\n\n/**\n * Get list of users who have been active within last @param interval seconds\n * @param  {Number} interval in seconds\n * @return {[Object]} promise resolving to array of user objects\n */\nexport async function getActiveUsers(interval) {\n    let response = await request({}, `users/active/${interval}`, 'GET');\n    return response.json();\n}\n\n///////////////////////////////////////////////////////////////////////\n// Messages\n/**\n * Send a message\n * @param  {Object} message with fields to, subject, and body\n * @return {String} response from server\n */\nexport async function sendMessage(message) {\n    let response = await request(\n        { message: message },\n        'message/send', 'POST'\n    );\n    return response.text();\n}\n/**\n * Return current user's messages\n * @return {[Object]} array of message objects\n */\nexport async function getMessages() {\n    let response = await request({}, 'message', 'POST');\n    return response.json();\n}\n/**\n* Return messages sent by current user\n* @return {[Object]} array of message objects\n */\nexport async function getSentMessages() {\n    let response = await request({}, 'message/sent', 'GET');\n    return response.json();\n}\n/**\n * Return current user's unread messages\n * @return {[Object]} array of message objects\n */\nexport async function getUnreadMessages() {\n    let response = await request({hasRead: false}, 'message', 'POST');\n    return response.json();\n}\n/**\n * Flag a message as \"read\"\n * @return {String} success message\n */\nexport async function markMessageRead(message, hasRead=true) {\n    let response = await request(\n        {id: message._id, hasRead: true},\n        'message/mark-read', 'PATCH');\n    return response.text();\n}\n\n///////////////////////////////////////////////////////////////////////\n// Fields\n/**\n * List of available fields for widgets.\n * @return {Promise} resolves to array of field objects\n */\nexport async function getFieldList() {\n    let response = await request({}, 'fields', 'GET');\n    return response.json();\n}\n/**\n * Updates a field on server.\n * @param  {Object}  field new object\n * @return {Promise} resolves to array of field objects\n */\nexport async function updateField(field) {\n    let response = await request({field: field}, 'fields', 'PUT');\n    return response.text();\n}\n/**\n * Delete a field from server.\n * @param  {Object}  field object to remove\n * @return {Promise} resolves to response message\n */\nexport async function deleteField(field) {\n    let response = await request({field: field}, 'fields', 'DELETE');\n    return response.text();\n}\n\n\n///////////////////////////////////////////////////////////////////////\n// Goals\n/**\n * List of all goals.\n * @return {Promise} resolves to array of goal objects\n */\nexport async function getGoalList() {\n    let response = await request({}, 'goals', 'POST');\n    return response.json();\n}\n/**\n * List of goals that apply to the given agent group(s).\n * @param  {Array of Strings}   agentGroups\n * @return {Promise} resolves to array of goal objects\n */\nexport async function getGoalsForAgentGroups(agentGroups) {\n    let response = await request({agentGroups: agentGroups}, 'goals', 'POST');\n    return response.json();\n}\n/**\n * Updates a goal on server.\n * @param  {Object}  goal new object\n * @return {Promise} resolves to response message\n */\nexport async function updateGoal(goal) {\n    let response = await request({goal: goal}, 'goals', 'PUT');\n    return response.text();\n}\n/**\n * Delete a goal from server.\n * @param  {Object}  goal object to remove\n * @return {Promise} resolves to response message\n */\nexport async function deleteGoal(goal) {\n    let response = await request({goal: goal}, 'goals', 'DELETE');\n    return response.text();\n}\n\n\n///////////////////////////////////////////////////////////////////////\n// Layouts\n/**\n * Get scorecard JSON layout for given agent group(s) and type.\n * @param  {Array of Strings} agentGroups user's agent groups\n * @param  {String} type either team or individual layout\n * @return {Object}\n */\nexport async function getLayouts(agentGroups, type) {\n    let response = await request({agentGroups: agentGroups, type: type}, 'layout');\n    return await response.json();\n}\n/**\n * List of all layouts.\n * @return {Promise} resolves to array of layout objects\n */\nexport async function getLayoutList() {\n    let response = await request({}, 'layouts', 'POST');\n    return response.json();\n}\n/**\n * Updates a layout on server.\n * @param  {Object}  layout new object\n * @return {Promise} resolves to response message\n */\nexport async function updateLayout(layout) {\n    let response = await request({layout: layout}, 'layouts', 'PUT');\n    return response.text();\n}\n/**\n * Delete a layout from server.\n * @param  {Object}  layout object to remove\n * @return {Promise} resolves to response message\n */\nexport async function deleteLayout(layout) {\n    let response = await request({layout: layout}, 'layouts', 'DELETE');\n    return response.text();\n}\n\n\n\n///////////////////////////////////////////////////////////////////////\n// Datasources' settings\n/**\n * List of all datasources.\n * @return {Promise} resolves to array of datasource objects\n */\nexport async function getDatasources() {\n    let response = await request({}, 'datasources', 'GET');\n    return response.json();\n}\n/**\n * Updates a datasource on server.\n * @param  {Object}  datasource new object\n * @return {Promise} resolves to response message\n */\nexport async function updateDatasource(datasource) {\n    let response = await request({datasource: datasource}, 'datasources', 'PUT');\n    return response.text();\n}\n/**\n * Delete a datasource from server.\n * @param  {Object}  datasource object to remove\n * @return {Promise} resolves to response message\n */\nexport async function deleteDatasource(datasource) {\n    let response = await request({datasource: datasource}, 'datasources', 'DELETE');\n    return response.text();\n}\n\n/**\n * Get skill groups with associated names, agentGroups and skills\n * @return {Promise -> [Object]} array of objects from SkillGroup table\n */\nexport async function getSkillGroups() {\n    let response = await request({}, 'skill-group', 'GET');\n    return response.json();\n}\n\n///////////////////////////////////////////////////////////////////////\n// 'Helpful Links'\n/**\n * List of all links.\n * @return {Promise} resolves to array of link objects\n */\nexport async function getLinkList() {\n    let response = await request({}, 'links', 'POST');\n    return response.json();\n}\n/**\n * Updates a link on server.\n * @param  {Object}  link new object\n * @return {Promise} resolves to response message\n */\nexport async function updateLink(link) {\n    let response = await request({link: link}, 'links', 'PUT');\n    return response.text();\n}\n/**\n * Delete a link from server.\n * @param  {Object}  link object to remove\n * @return {Promise} resolves to response message\n */\nexport async function deleteLink(link) {\n    let response = await request({link: link}, 'links', 'DELETE');\n    return response.text();\n}\n\n///////////////////////////////////////////////////////////////////////\n// Skilling jobs\n/**\n * List of available scheduled skilling jobs.\n * @return {Promise} resolves to array of field objects\n */\nexport async function getSkillJobs() {\n    let response = await request({}, 'skill', 'GET');\n    return response.json();\n}\n/**\n * Updates a scheduled skilling job on server.\n * @param  {Object}  job new object\n * @return {Promise} resolves to server's response\n */\nexport async function updateSkillJob(job) {\n    // format data\n    const format = (skillStr) => skillStr.split(',').map((sk) => sk.trim());\n\n    ['addSkills', 'removeSkills'].map((prop) => {\n        let skills = job.data[prop];\n        if (typeof(skills) == 'string') {\n            job.data[prop] = format(skills);\n        }\n    });\n\n    let response = await request({job: job, data: job.data}, 'skill', 'PUT');\n    return response.text();\n}\n/**\n * Delete the given skilling job object.\n * @param  {Object} job\n * @return {Promise} resolves to response from server\n */\nexport async function deleteSkillJob(job) {\n    let response = await request({job: job}, 'skill', 'DELETE');\n    return response.text();\n}\n\n\n///////////////////////////////////////////////////////////////////////\n// Server utilities\nexport async function rebootServer() {\n    const response = await request({}, 'reboot-server', 'POST');\n    return response.text();\n}\nexport async function reloadData(params) {\n    const response = await request(params, 'reload-data', 'POST');\n    return response.text();\n}\n\n/**\n * Upload CSV file to custom data source.\n * @param  {Object} params including fields datasourceName and csv\n * @return {Promise}       resolves to string (server response message)\n */\nexport async function uploadData(params) {\n    try {\n        const response = await request(params, 'upload-data', 'POST');\n        return await response.text();\n    } catch (err) {\n        return err.message;\n    }\n}\n\n\n\n///////////////////////////////////////////////////////////////////////\n// Request helpers\n///////////////////////////////////////////////////////////////////////\n\n/**\n *  Helper function that pulls credentials from DOM, then makes request to server.\n * @param  {Object} parameters POSTed to server\n * @param  {String} endpoint   at server's API\n * @return {Object}            JSON data\n */\nasync function getData(parameters, endpoint) {\n    const response = await request(parameters, endpoint);\n    return await response.json();\n}\n\n\n/**\n * Make a request to server with given parameters.\n * @param  {Object} parameters passed as body of request\n * @param  {String} [url='statistics'] endpoint on server\n * @param  {String} [method='POST'] HTTP action\n * @return {Promise} response from server\n */\nasync function request(parameters, url='statistics', method='POST') {\n    const apiURL = API_URL + url; // defined in api_url.js\n\n    const requestOptions = {\n        method: method,\n        headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n        },\n        credentials: 'include'\n    }\n    if (method != 'GET') {\n        requestOptions.body = JSON.stringify(parameters);\n    }\n\n    return fetch(apiURL, requestOptions)\n        .then(async (response) => {\n            if (response.status == 504) notifyServer504(parameters, url); // debugging\n            if (!response.ok) {\n                let bodyText = await response.text();\n                throw new Error(`Server responded with ${response.status} ${response.statusText}: ${bodyText}`);\n            }\n            return response;\n        });\n}\n\nasync function notifyServer504() {\n    return fetch(API_URL + 'notify-504');\n}\n\n\n// Gets the actual returned value/data out of JSON from the server.\nfunction jsonToReturnValue(json, type) {\n    return json['env:Envelope']['env:Body'][0]['ns2:'+type+'Response'][0]['return'][0];\n}\n\n// takes JSON from server and returns text within 'faultstring' tag (if existant)\nfunction getFaultStringFromData(data) {\n    try {\n        return data['env:Envelope']['env:Body'][0]['env:Fault'][0]['faultstring'];\n    } catch (err) {\n        return '';\n    }\n}\n\n// Given a requestType, returns JSON to submit to server in POST request.\n// requestType should match Five9 API command.\nexport function getParameters(requestType) {\n    let params = {};\n    // Initiate session\n    if (requestType == 'setSessionParameters') {\n        params = {\n            'service': 'setSessionParameters',\n            'settings': [ {\n                'viewSettings': [\n                    { 'idleTimeOut': 1800 },\n                    { 'statisticsRange': 'CurrentDay' },\n                    { 'rollingPeriod': 'Minutes10' }\n                ]\n            } ]\n        }\n    }\n    // Get real-time call stats\n    if (requestType == 'getStatistics') {\n        params = {\n            'service': 'getStatistics',\n            'settings': [ {\n                'statisticType': 'ACDStatus'\n            } ]\n        }\n    }\n\n    return params;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/public/javascript/api.js","\n// Send out an error alert in console and on the page.\nexport function error(err, message='') {\n    // timestamp\n    let newDate = new Date();\n    newDate.setTime(Date.now());\n    let dateString = newDate.toTimeString();\n    console.log(dateString);\n\n    // Post to page\n    $('#message').text(`Whoops! An error occurred. ${err.message} ${message}`);\n    console.log('Error log:');\n    console.error(err);\n}\n\n// Nicely formatted time\nexport function formatAMPM(date) {\n    let hours = date.getHours();\n    let minutes = date.getMinutes();\n    let seconds = date.getSeconds();\n    let ampm = hours >= 12 ? 'PM' : 'AM';\n    hours = hours % 12;\n    hours = hours ? hours : 12; // the hour '0' should be '12'\n    minutes = minutes < 10 ? '0'+minutes : minutes;\n    seconds = seconds < 10 ? '0'+seconds : seconds;\n    let strTime = hours + ':' + minutes + ':' + seconds + ' ' + ampm;\n    return strTime;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/public/javascript/utility.js","export const API_URL = 'https://nathanclonts.com/dashboard/api/';\n\n\n\n// WEBPACK FOOTER //\n// ./src/public/javascript/local_settings.js"],"sourceRoot":""}