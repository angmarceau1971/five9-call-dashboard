{"version":3,"sources":["webpack:///webpack/bootstrap e7eb73c18cec5b18c53e","webpack:///./src/public/javascript/queue-dashboard.js","webpack:///./src/public/javascript/gizmo.js","webpack:///./src/public/javascript/api.js","webpack:///./src/public/javascript/utility.js","webpack:///./src/public/javascript/local_settings.js"],"names":["timeout","gizmo","startItUp","load","$","click","event","preventDefault","clearTimeout","html","text","moment","runQueueDashboard","err","error","id","closest","attr","thisgizmo","gizmos","showQueueList","table","next","createQueueList","trigger","document","getElementById","href","slice","window","addEventListener","lastSlUpdate","slData","eventLoop","interval","data","currentTime","Date","time","start","format","end","refreshView","setTimeout","serviceLevelData","length","console","log","each","i","gizmoElement","thisGizmo","name","skills","skillFilter","queueList","callsInQueue","maxWait","agentsLoggedIn","agentsNotReady","agentsOnCall","agentsReady","serviceLevel","callsOffered","abandons","queue","includes","Math","max","split","metrics","reduce","totals","current","skill","calls","push","skillName","formatWaitTime","waitString","SLpercent","round","abandonRate","find","formatAMPM","empty","sort","a","b","thead","createElement","th1","appendChild","createTextNode","className","th2","th3","append","forEach","tr","td1","td2","td3","seconds","wait","setSeconds","toISOString","substr","jsonToViewData","json","includeFields","columns","rows","row","newRow","j","field","indexOf","GizmoManager","openGizmoId","build","template","cloneNode","classList","remove","add","nextGizmoId","setupInteractions","gizmoID","save","updateCurrent","skillStringToArray","css","val","bind","toggleClass","lastId","Object","keys","map","closeModal","deleteGizmo","target","is","updateSkillFilter","addGizmo","newID","JSON","stringify","localStorage","setItem","getItem","skillGroups","res","skillGroup","parse","skillString","trim","getStatistics","filter","response","request","queueStats","getData","getReportResults","params","type","getLookerData","lookId","getLogs","query","getUserInformation","username","path","updateUserTheme","newTheme","getAdminUsers","users","updateAdminUser","user","getSupervisorUsers","updateSupervisorUser","getUsers","getActiveUsers","sendMessage","message","getMessages","getSentMessages","getUnreadMessages","hasRead","markMessageRead","_id","getFieldList","updateField","deleteField","getGoalList","getGoalsForAgentGroups","agentGroups","updateGoal","goal","deleteGoal","getLayouts","getLayoutList","updateLayout","layout","deleteLayout","getDatasources","updateDatasource","datasource","deleteDatasource","getSkillGroups","getLinkList","updateLink","link","deleteLink","getSkillJobs","updateSkillJob","job","skillStr","sk","prop","deleteSkillJob","rebootServer","reloadData","uploadData","parameters","endpoint","url","method","apiURL","API_URL","requestOptions","headers","credentials","body","fetch","then","status","notifyServer504","ok","bodyText","Error","statusText","jsonToReturnValue","getFaultStringFromData","getParameters","requestType","newDate","setTime","now","dateString","toTimeString","date","hours","getHours","minutes","getMinutes","getSeconds","ampm","strTime"],"mappings":"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","file":"queues.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 120);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap e7eb73c18cec5b18c53e","import { error, formatAMPM } from './utility';\nimport * as api from './api';\nimport GizmoManager from './gizmo';\n\n// timeout to pause event loop when needed\nlet timeout = null;\n\n// Object to manage the gizmos (queue widgets)\nlet gizmo = null;\n\nasync function startItUp() {\n    gizmo = new GizmoManager();\n    await gizmo.load();\n\n    // listen for sign-in button press\n    $('.play-pause').click(async (event) => {\n        // prevent redirection\n        event.preventDefault();\n\n        // Currently running?\n        // stop any current event loops running\n        if (timeout != null) {\n            clearTimeout(timeout);\n            timeout = null;\n            $('.play-pause').html('&#9658;'); // show play button\n            // Remind user that they're paused\n            $('.message').text(`Dashboard paused since ${moment()}.`);\n        }\n        // Not running? Start it up\n        else {\n            $('.play-pause').html('&#10074;&#10074;'); // show pause button\n            // begin updating data & page every few seconds\n            try {\n                runQueueDashboard();\n            } catch (err) {\n                error(err, 'Error occurred while queue dashboard was running.');\n            }\n        }\n    });\n\n    // Update displayed queue list when user clicks button\n    $('.show-skills-list').click(function (event) {\n        const id = $(this).closest('.gizmo').attr('id');\n        const thisgizmo = gizmo.gizmos[id];\n        thisgizmo.showQueueList = !thisgizmo.showQueueList;\n        const table = $(this).next('table.queue-list');\n        createQueueList(thisgizmo, table);\n    });\n\n    // Trigger \"play\" button to start updating when page is loaded.\n    $('.play-pause').trigger('click');\n    $('.big-display').click(function(event) {\n        if (document.getElementById('big-display').href.slice(-4) != '.css') {\n            document.getElementById('big-display').href = `styles/big-display.css`;\n        } else {\n            document.getElementById('big-display').href = '';\n        }\n    });\n};\nwindow.addEventListener('load', startItUp);\n\n\nasync function runQueueDashboard() {\n    let lastSlUpdate = null;\n    let slData = [];\n\n    async function eventLoop(interval) {\n        // Get the current queue data\n        try {\n            // Retrieve current queue stats\n            let data = await api.queueStats();\n\n            // Get SL stats\n            // Only update SL every 3 minutes\n            let currentTime = new Date();\n            if ((currentTime - lastSlUpdate) > 180000) {\n                try {\n                    let time = {\n                        start: moment().format('YYYY-MM-DD') + 'T00:00:00',\n                        end:   moment().format('YYYY-MM-DD') + 'T23:59:59'\n                    };\n                    slData = await api.getReportResults(time, 'service-level');\n                    lastSlUpdate = currentTime;\n                } catch (err) {\n                    error(err, `An error occurred when getting service level data: ${err}`);\n                    slData = [];\n                }\n            }\n            // Update the view / DOM\n            refreshView(data, slData);\n\n        } catch (err) {\n            error(err);\n        }\n\n        // restart loop\n        timeout = setTimeout(() => {\n            eventLoop(interval);\n        }, interval);\n    }\n\n    // Refresh every 20 seconds.\n    eventLoop(20000);\n}\n\n\n\n// Takes nicely formatted data. Updates dashboard view.\n// ${data} : ACD stats (current queue info)\n// ${serviceLevel} : service level report\nfunction refreshView(data, serviceLevelData) {\n    if (data.length == 0) {\n        console.log(`[${moment()}] No queue data received. Aborting refresh.`);\n        return;\n    }\n\n    // update each gizmo on the screen\n    $('.gizmo').each((i, gizmoElement) => {\n        const thisGizmo = gizmo.gizmos[gizmoElement.id];\n        let name = thisGizmo.name;\n        let skills = thisGizmo.skillFilter;\n        // Clear old queue list from gizmo\n        thisGizmo.queueList = [];\n\n        // Determine calls and agent stats for this gizmo's skills\n        let callsInQueue = 0,\n            maxWait = 0,\n            agentsLoggedIn = 0,\n            agentsNotReady = 0,\n            agentsOnCall = 0,\n            agentsReady = 0,\n            serviceLevel = 0,\n            callsOffered = 0,\n            abandons = 0;\n\n        for (let i=0; i < data.length; i++) {\n            let queue = data[i];\n            // Include skills in gizmo filter, or all skills if none are in filter\n            if (skills.includes(queue['SkillName']) || skills.length == 0) {\n                // Real-time queue metrics\n                callsInQueue += queue['CallsInQueue'];\n                maxWait = Math.max(maxWait, queue['CurrentLongestQueueTime']);\n                agentsLoggedIn = Math.max(agentsLoggedIn, queue['AgentsLoggedIn'].split(' ')[0]*1);\n                agentsNotReady = Math.max(agentsNotReady, queue['AgentsNotReadyForCalls']);\n                agentsOnCall = Math.max(agentsOnCall, queue['AgentsOnCall']);\n                agentsReady = Math.max(agentsReady, queue['AgentsReadyForCalls']);\n\n                // Calculate SL and abandon rate\n                let metrics = serviceLevelData.reduce((totals, current) => {\n                    if (current.skill == queue['SkillName']) {\n                        totals.serviceLevel += current.serviceLevel;\n                        totals.calls += current.calls;\n                        totals.abandons += current.abandons;\n                    }\n                    return totals;\n                }, { serviceLevel: 0, calls: 0, abandons: 0 });\n                serviceLevel += metrics.serviceLevel;\n                callsOffered += metrics.calls;\n                abandons += metrics.abandons;\n\n                // Add to list of skills in queue\n                if (queue['CallsInQueue'] > 0) {\n                    thisGizmo.queueList.push({\n                        skillName: queue['SkillName'],\n                        callsInQueue: queue['CallsInQueue'],\n                        maxWait: formatWaitTime(queue['CurrentLongestQueueTime'])\n                    });\n                }\n            }\n        }\n\n        // Format wait time from seconds to MM:SS or HH:MM:SS\n        let waitString = formatWaitTime(maxWait);\n\n        // Update metrics\n        let SLpercent = callsOffered == 0\n            ? 'N/A'\n            : Math.round(100 * serviceLevel / callsOffered) + '%';\n        let abandonRate = callsOffered == 0\n            ? 'N/A'\n            : Math.round(100 * abandons / callsOffered) + '%';\n        $(gizmoElement).find('.metric.service-level').text(SLpercent);\n        $(gizmoElement).find('.metric.abandon-rate').text(abandonRate);\n        $(gizmoElement).find('.calls-in-sl').text(serviceLevel);\n        $(gizmoElement).find('.calls-out-of-sl').text(callsOffered - serviceLevel);\n\n        $(gizmoElement).find('.metric.calls-in-queue').text(callsInQueue);\n        $(gizmoElement).find('.metric.max-wait').text(waitString);\n        $(gizmoElement).find('.agents-logged-in').text(agentsLoggedIn);\n        $(gizmoElement).find('.agents-not-ready-for-calls').text(agentsNotReady);\n        $(gizmoElement).find('.agents-on-call').text(agentsOnCall);\n        $(gizmoElement).find('.agents-ready-for-calls').text(agentsReady);\n\n        // Update queue list, if showing\n        if (thisGizmo.showQueueList) {\n            const table = $(gizmoElement).find('.queue-list');\n            createQueueList(thisGizmo, table);\n        }\n    }); // gizmo.forEach\n\n    // Clear old messages\n    $('#message').text(' ');\n\n    // Update clock\n    $('.clock').text(formatAMPM(new Date()));\n}\n\n\n// Update queue list in DOM\n// ${gizmo} object to build list on. ${table} element storing list.\nfunction createQueueList(thisGizmo, table) {\n    table.empty(); // clear old list\n\n    // anything to list?\n    if (thisGizmo.queueList.length == 0) return;\n\n    // Sort by max wait time\n    thisGizmo.queueList.sort((a, b) => a.maxWait > b.maxWait ? -1 : 1);\n\n    // Add headers\n    const thead = document.createElement('thead');\n    const th1 = document.createElement('th');\n    th1.appendChild(document.createTextNode('Skill Name'));\n    th1.className += ' type-text';\n    const th2 = document.createElement('th');\n    th2.appendChild(document.createTextNode('Calls'));\n    th2.className += ' type-number';\n    const th3 = document.createElement('th');\n    th3.appendChild(document.createTextNode('Max Wait'));\n    th3.className += ' type-number';\n    thead.appendChild(th1); thead.appendChild(th2); thead.appendChild(th3);\n    table.append(thead);\n\n    // Update DOM from queueList\n    thisGizmo.queueList.forEach((queue) => {\n        const tr = document.createElement('tr');\n        const td1 = document.createElement('td');\n        td1.appendChild(document.createTextNode(queue.skillName));\n        td1.className += ' type-text';\n        const td2 = document.createElement('td');\n        td2.appendChild(document.createTextNode(queue.callsInQueue));\n        td2.className += ' type-number';\n        const td3 = document.createElement('td');\n        td3.appendChild(document.createTextNode(queue.maxWait));\n        td3.className += ' type-number';\n        tr.appendChild(td1); tr.appendChild(td2); tr.appendChild(td3);\n        table.append(tr);\n    });\n}\n\n// Turns seconds into nicely formatted MM:SS or HH:MM:SS\nfunction formatWaitTime(seconds) {\n    const wait = new Date(null);\n    wait.setSeconds(seconds);\n    if (seconds < 3600) { // MM:SS\n        return wait.toISOString().substr(14, 5);\n    }\n    return wait.toISOString().substr(11, 8); // HH:MM:SS\n}\n\n// Return formatted column / key assignments\n// Takes JSON generated from original Five9 SOAP API response\nfunction jsonToViewData(json,\n        includeFields=['Skill Name', 'Calls In Queue',\n                        'Current Longest Queue Time', 'Agents Logged In',\n                        'Agents Not Ready For Calls', 'Agents On Call',\n                        'Agents Ready For Calls']) {\n    let columns = json['columns'][0]['values'][0]['data'];\n    let rows = json['rows'];\n    let data = [];\n\n    for (let i=0; i < rows.length; i++) {\n        let row = rows[i]['values'][0]['data'];\n        let newRow = {};\n        for (let j=0; j < includeFields.length; j++) {\n            let field = includeFields[j];\n            newRow[field] = row[columns.indexOf(field)];\n            // trim extra 0's to fix time formatting (to seconds)\n            if (field == 'Current Longest Queue Time')\n                newRow[field] = newRow[field].slice(0, -3);\n        }\n        data.push(newRow);\n    }\n    return data;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/public/javascript/queue-dashboard.js","import * as api from './api';\n\n// Handling of queue gizmo widgets.\n// Manages state and DOM (modals to edit skills & name).\nexport default function GizmoManager() {\n    // Object storing info on filters & names for each gizmo-widget\n    this.gizmos = null;\n    // which gizmo has a menu open?\n    this.openGizmoId = null;\n\n    this.build = function(id=null) {\n        let template = document.getElementById('gizmo-template');\n        let gizmo = template.cloneNode(true);\n\n        // update classes to those of a live, wild gizmo\n        gizmo.classList.remove('template');\n        gizmo.classList.add('gizmo');\n\n        // Create an ID and append to DOM\n        if (id == null) {\n            id = this.nextGizmoId();\n        }\n        gizmo.id = id;\n        $('.gizmo-wrapper').append(gizmo);\n\n        // Add to gizmos object, but don't overwrite existing ones\n        if (!this.gizmos[id]) {\n            this.gizmos[id] = {\n                name: 'New one!',\n                skillFilter: []\n            }\n        }\n        // set name for DOM\n        $(gizmo).find('.department-name').html(this.gizmos[id].name);\n\n        this.setupInteractions(id);\n        return id;\n    }\n\n    this.remove = function(gizmoID) {\n        document.getElementById(gizmoID).remove();\n        delete this.gizmos[gizmoID];\n        this.save();\n    }\n\n    // Which gizmo is currently edited in the skill menu? This function will\n    // update that gizmo's attributes.\n    this.updateCurrent = function(name, skills) {\n        this.gizmos[this.openGizmoId].name        = name;\n        this.gizmos[this.openGizmoId].skillFilter = skillStringToArray(skills);\n    }\n\n    // Set up menu interactions for a gizmo with the given ID\n    this.setupInteractions = function(id) {\n        let gizmo = $('#' + id);\n\n        // Skills menu\n        gizmo.find('.skills-edit-toggle').click(function (event) {\n            // Show the modal...\n            $('.modal').css('display', 'block');\n            // Track currently open menu...\n            this.openGizmoId = id;\n            // And set modal values to match this gizmo\n            $('.modal').find('.gizmo-name').val(this.gizmos[id].name);\n            $('.modal').find('.skills').val(this.gizmos[id].skillFilter);\n        }.bind(this));\n\n        // Show/hide queue list\n        this.gizmos[id].showQueueList = false;\n        gizmo.find('.show-skills-list').click(function (event) {\n            gizmo.find('.show-skills-list').toggleClass('selected');\n            gizmo.find('.queue-list').toggleClass('hidden');\n        }.bind(this));\n    }\n\n    // Get a new ID string in the form 'gizmo-<integer>'\n    this.nextGizmoId = function() {\n        if (!this.gizmos) return 'gizmo-0';\n        let lastId = Math.max(\n            ...Object.keys(this.gizmos).map((id) =>\n                id.split('-')[1]\n            )\n        );\n        return `gizmo-${lastId + 1}`;\n    };\n\n    // set up modal window for editing skills.\n    $('.modal').find('.close, .cancel, .save').click(function closeModal() {\n        $('.modal').css('display', 'none')\n    });\n    $('.modal').find('.remove').click(function deleteGizmo() {\n        $('.modal').css('display', 'none');\n        this.remove(this.openGizmoId);\n    }.bind(this));\n    $(window).click(function closeModal(event) {\n        if ($(event.target).is('.modal'))\n            $('.modal').css('display', 'none');\n    }.bind(this));\n    // Listen for skill filter updates\n    $('.modal .save').click(function updateSkillFilter() {\n        const name   = $('.modal .gizmo-name').val();\n        const skills = $('.modal .skills').val();\n        $('#' + this.openGizmoId).find('.department-name').html(name);\n        this.updateCurrent(name, skills);\n        this.save();\n    }.bind(this));\n    // Listen for add-gizmo button\n    $('.add-gizmo').click(function addGizmo() {\n        let newID = this.build();\n        // save current state to local storage\n        this.save();\n    }.bind(this));\n\n\n    // Save gizmos to local storage\n    this.save = function() {\n        const data = JSON.stringify(this.gizmos);\n        localStorage.setItem('user_gizmos', data);\n    }\n\n    // Load gizmos from local storage on startup\n    this.load = async function() {\n        let data = localStorage.getItem('user_gizmos');\n        if (!data) {\n            let skillGroups = await api.getSkillGroups();\n            let i = 0;\n            this.gizmos = skillGroups.reduce((res, skillGroup) => {\n                res[`gizmo-${i++}`] = {\n                    name: skillGroup.name,\n                    queueList: [],\n                    showQueueList: false,\n                    skillFilter: skillGroup.skills\n                };\n                return res;\n            }, {});\n            console.log('Loading default gizmos:', this.gizmos);\n        } else {\n            this.gizmos = JSON.parse(data);\n            console.log('Loading saved gizmos:', this.gizmos);\n        }\n        // Build view\n        for (const id of Object.keys(this.gizmos)) {\n            this.build(id);\n        };\n    }\n}\n\n// Breaks down \"skill1, skill2 , skill3\" string\n//          to ['skill1','skill2','skill3'] array\nfunction skillStringToArray(skillString) {\n    if (skillString == '') return [];\n    return skillString.split(',').map((skill) => skill.trim());\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/public/javascript/gizmo.js","import { error } from './utility.js';\nimport { API_URL } from './local_settings.js';\n\n////////////////////////////////////////////////////////////////\n// Functions to retrieve and extract data from Five9.\n// These functions interact with our server, which houses data\n// and formats data originating in Five9 reports.\n////////////////////////////////////////////////////////////////\n\n// Get agent/ACD statistics\nexport async function getStatistics(filter) {\n    const response = await request(filter, 'statistics');\n    return response.json();\n}\n\n// Get real-time stats\nexport async function queueStats() {\n    return getData({}, 'queue-stats');\n}\n\n/**\n * Get CSV string of report results from Five9\n * @param  {Object} params\n * @param  {String} type   endpoint: `maps` or `service-level`\n * @return {Promise -> Object}        JSON data\n */\nexport function getReportResults(params, type) {\n    return getData(params, `reports/${type}`);\n}\n\n/**\n * Pull Looker data from given Look\n * @param  {String} lookId\n * @return {Object} JSON data\n */\nexport async function getLookerData(lookId) {\n    let response = await request({lookId: lookId}, 'looker');\n    return await response.json();\n}\n\nexport async function getLogs(query) {\n    let response = await request({query: query}, 'logs');\n    return await response.json();\n}\n\n///////////////////////////////////////////////////////////////////////\n// Users\n/**\n * Return user information from username.\n * @param  {String} username if blank, will return currently logged-in user's\n *                           data\n * @return {Promise -> Object} User's object\n */\nexport async function getUserInformation(username = '') {\n    let path = username ? `users/data/${username}` : `users/data`;\n    const response = await request({}, path, 'GET');\n    return response.json();\n}\n/**\n * Set a user's theme preferences.\n * @param  {String} username\n * @param  {Object} newTheme with theme fields\n * @return {Promise -> String} response message\n */\nexport async function updateUserTheme(username, newTheme) {\n    const response = await request(\n        { username: username, newTheme: newTheme },\n        `users/theme`, 'PATCH'\n    );\n    return response.text();\n}\n\n// Admin users\nexport async function getAdminUsers() {\n    let response = await request({}, 'users/admin', 'GET');\n    let users = await response.json();\n    console.log(users)\n    return users;\n}\nexport async function updateAdminUser(user) {\n    let response = await request({user: user}, 'users/admin', 'PATCH');\n    return response.text();\n}\n\n// Supervisor users\nexport async function getSupervisorUsers() {\n    let response = await request({}, 'users/supervisor', 'GET');\n    let users = await response.json();\n    console.log(users)\n    return users;\n}\nexport async function updateSupervisorUser(user) {\n    let response = await request({user: user}, 'users/supervisor', 'PATCH');\n    return response.text();\n}\n\n// Get list of all users\nexport async function getUsers() {\n    let response = await request({}, 'users', 'GET');\n    return response.json();\n}\n\n/**\n * Get list of users who have been active within last @param interval seconds\n * @param  {Number} interval in seconds\n * @return {[Object]} promise resolving to array of user objects\n */\nexport async function getActiveUsers(interval) {\n    let response = await request({}, `users/active/${interval}`, 'GET');\n    return response.json();\n}\n\n///////////////////////////////////////////////////////////////////////\n// Messages\n/**\n * Send a message\n * @param  {Object} message with fields to, subject, and body\n * @return {String} response from server\n */\nexport async function sendMessage(message) {\n    let response = await request(\n        { message: message },\n        'message/send', 'POST'\n    );\n    return response.text();\n}\n/**\n * Return current user's messages\n * @return {[Object]} array of message objects\n */\nexport async function getMessages() {\n    let response = await request({}, 'message', 'POST');\n    return response.json();\n}\n/**\n* Return messages sent by current user\n* @return {[Object]} array of message objects\n */\nexport async function getSentMessages() {\n    let response = await request({}, 'message/sent', 'GET');\n    return response.json();\n}\n/**\n * Return current user's unread messages\n * @return {[Object]} array of message objects\n */\nexport async function getUnreadMessages() {\n    let response = await request({hasRead: false}, 'message', 'POST');\n    return response.json();\n}\n/**\n * Flag a message as \"read\"\n * @return {String} success message\n */\nexport async function markMessageRead(message, hasRead=true) {\n    let response = await request(\n        {id: message._id, hasRead: true},\n        'message/mark-read', 'PATCH');\n    return response.text();\n}\n\n///////////////////////////////////////////////////////////////////////\n// Fields\n/**\n * List of available fields for widgets.\n * @return {Promise} resolves to array of field objects\n */\nexport async function getFieldList() {\n    let response = await request({}, 'fields', 'GET');\n    return response.json();\n}\n/**\n * Updates a field on server.\n * @param  {Object}  field new object\n * @return {Promise} resolves to array of field objects\n */\nexport async function updateField(field) {\n    let response = await request({field: field}, 'fields', 'PUT');\n    return response.text();\n}\n/**\n * Delete a field from server.\n * @param  {Object}  field object to remove\n * @return {Promise} resolves to response message\n */\nexport async function deleteField(field) {\n    let response = await request({field: field}, 'fields', 'DELETE');\n    return response.text();\n}\n\n\n///////////////////////////////////////////////////////////////////////\n// Goals\n/**\n * List of all goals.\n * @return {Promise} resolves to array of goal objects\n */\nexport async function getGoalList() {\n    let response = await request({}, 'goals', 'POST');\n    return response.json();\n}\n/**\n * List of goals that apply to the given agent group(s).\n * @param  {Array of Strings}   agentGroups\n * @return {Promise} resolves to array of goal objects\n */\nexport async function getGoalsForAgentGroups(agentGroups) {\n    let response = await request({agentGroups: agentGroups}, 'goals', 'POST');\n    return response.json();\n}\n/**\n * Updates a goal on server.\n * @param  {Object}  goal new object\n * @return {Promise} resolves to response message\n */\nexport async function updateGoal(goal) {\n    let response = await request({goal: goal}, 'goals', 'PUT');\n    return response.text();\n}\n/**\n * Delete a goal from server.\n * @param  {Object}  goal object to remove\n * @return {Promise} resolves to response message\n */\nexport async function deleteGoal(goal) {\n    let response = await request({goal: goal}, 'goals', 'DELETE');\n    return response.text();\n}\n\n\n///////////////////////////////////////////////////////////////////////\n// Layouts\n/**\n * Get scorecard JSON layout for given agent group(s) and type.\n * @param  {Array of Strings} agentGroups user's agent groups\n * @param  {String} type either team or individual layout\n * @return {Object}\n */\nexport async function getLayouts(agentGroups, type) {\n    let response = await request({agentGroups: agentGroups, type: type}, 'layout');\n    return await response.json();\n}\n/**\n * List of all layouts.\n * @return {Promise} resolves to array of layout objects\n */\nexport async function getLayoutList() {\n    let response = await request({}, 'layouts', 'POST');\n    return response.json();\n}\n/**\n * Updates a layout on server.\n * @param  {Object}  layout new object\n * @return {Promise} resolves to response message\n */\nexport async function updateLayout(layout) {\n    let response = await request({layout: layout}, 'layouts', 'PUT');\n    return response.text();\n}\n/**\n * Delete a layout from server.\n * @param  {Object}  layout object to remove\n * @return {Promise} resolves to response message\n */\nexport async function deleteLayout(layout) {\n    let response = await request({layout: layout}, 'layouts', 'DELETE');\n    return response.text();\n}\n\n\n\n///////////////////////////////////////////////////////////////////////\n// Datasources' settings\n/**\n * List of all datasources.\n * @return {Promise} resolves to array of datasource objects\n */\nexport async function getDatasources() {\n    let response = await request({}, 'datasources', 'GET');\n    return response.json();\n}\n/**\n * Updates a datasource on server.\n * @param  {Object}  datasource new object\n * @return {Promise} resolves to response message\n */\nexport async function updateDatasource(datasource) {\n    let response = await request({datasource: datasource}, 'datasources', 'PUT');\n    return response.text();\n}\n/**\n * Delete a datasource from server.\n * @param  {Object}  datasource object to remove\n * @return {Promise} resolves to response message\n */\nexport async function deleteDatasource(datasource) {\n    let response = await request({datasource: datasource}, 'datasources', 'DELETE');\n    return response.text();\n}\n\n/**\n * Get skill groups with associated names, agentGroups and skills\n * @return {Promise -> [Object]} array of objects from SkillGroup table\n */\nexport async function getSkillGroups() {\n    let response = await request({}, 'skill-group', 'GET');\n    return response.json();\n}\n\n///////////////////////////////////////////////////////////////////////\n// 'Helpful Links'\n/**\n * List of all links.\n * @return {Promise} resolves to array of link objects\n */\nexport async function getLinkList() {\n    let response = await request({}, 'links', 'POST');\n    return response.json();\n}\n/**\n * Updates a link on server.\n * @param  {Object}  link new object\n * @return {Promise} resolves to response message\n */\nexport async function updateLink(link) {\n    let response = await request({link: link}, 'links', 'PUT');\n    return response.text();\n}\n/**\n * Delete a link from server.\n * @param  {Object}  link object to remove\n * @return {Promise} resolves to response message\n */\nexport async function deleteLink(link) {\n    let response = await request({link: link}, 'links', 'DELETE');\n    return response.text();\n}\n\n///////////////////////////////////////////////////////////////////////\n// Skilling jobs\n/**\n * List of available scheduled skilling jobs.\n * @return {Promise} resolves to array of field objects\n */\nexport async function getSkillJobs() {\n    let response = await request({}, 'skill', 'GET');\n    return response.json();\n}\n/**\n * Updates a scheduled skilling job on server.\n * @param  {Object}  job new object\n * @return {Promise} resolves to server's response\n */\nexport async function updateSkillJob(job) {\n    // format data\n    const format = (skillStr) => skillStr.split(',').map((sk) => sk.trim());\n\n    ['addSkills', 'removeSkills'].map((prop) => {\n        let skills = job.data[prop];\n        if (typeof(skills) == 'string') {\n            job.data[prop] = format(skills);\n        }\n    });\n\n    let response = await request({job: job, data: job.data}, 'skill', 'PUT');\n    return response.text();\n}\n/**\n * Delete the given skilling job object.\n * @param  {Object} job\n * @return {Promise} resolves to response from server\n */\nexport async function deleteSkillJob(job) {\n    let response = await request({job: job}, 'skill', 'DELETE');\n    return response.text();\n}\n\n\n///////////////////////////////////////////////////////////////////////\n// Server utilities\nexport async function rebootServer() {\n    const response = await request({}, 'reboot-server', 'POST');\n    return response.text();\n}\nexport async function reloadData(params) {\n    const response = await request(params, 'reload-data', 'POST');\n    return response.text();\n}\n\n/**\n * Upload CSV file to custom data source.\n * @param  {Object} params including fields datasourceName and csv\n * @return {Promise}       resolves to string (server response message)\n */\nexport async function uploadData(params) {\n    try {\n        const response = await request(params, 'upload-data', 'POST');\n        return await response.text();\n    } catch (err) {\n        return err.message;\n    }\n}\n\n\n\n///////////////////////////////////////////////////////////////////////\n// Request helpers\n///////////////////////////////////////////////////////////////////////\n\n/**\n *  Helper function that pulls credentials from DOM, then makes request to server.\n * @param  {Object} parameters POSTed to server\n * @param  {String} endpoint   at server's API\n * @return {Object}            JSON data\n */\nasync function getData(parameters, endpoint) {\n    const response = await request(parameters, endpoint);\n    return await response.json();\n}\n\n\n/**\n * Make a request to server with given parameters.\n * @param  {Object} parameters passed as body of request\n * @param  {String} [url='statistics'] endpoint on server\n * @param  {String} [method='POST'] HTTP action\n * @return {Promise} response from server\n */\nasync function request(parameters, url='statistics', method='POST') {\n    const apiURL = API_URL + url; // defined in api_url.js\n\n    const requestOptions = {\n        method: method,\n        headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n        },\n        credentials: 'include'\n    }\n    if (method != 'GET') {\n        requestOptions.body = JSON.stringify(parameters);\n    }\n\n    return fetch(apiURL, requestOptions)\n        .then(async (response) => {\n            if (response.status == 504) notifyServer504(parameters, url); // debugging\n            if (!response.ok) {\n                let bodyText = await response.text();\n                throw new Error(`Server responded with ${response.status} ${response.statusText}: ${bodyText}`);\n            }\n            return response;\n        });\n}\n\nasync function notifyServer504() {\n    return fetch(API_URL + 'notify-504');\n}\n\n\n// Gets the actual returned value/data out of JSON from the server.\nfunction jsonToReturnValue(json, type) {\n    return json['env:Envelope']['env:Body'][0]['ns2:'+type+'Response'][0]['return'][0];\n}\n\n// takes JSON from server and returns text within 'faultstring' tag (if existant)\nfunction getFaultStringFromData(data) {\n    try {\n        return data['env:Envelope']['env:Body'][0]['env:Fault'][0]['faultstring'];\n    } catch (err) {\n        return '';\n    }\n}\n\n// Given a requestType, returns JSON to submit to server in POST request.\n// requestType should match Five9 API command.\nexport function getParameters(requestType) {\n    let params = {};\n    // Initiate session\n    if (requestType == 'setSessionParameters') {\n        params = {\n            'service': 'setSessionParameters',\n            'settings': [ {\n                'viewSettings': [\n                    { 'idleTimeOut': 1800 },\n                    { 'statisticsRange': 'CurrentDay' },\n                    { 'rollingPeriod': 'Minutes10' }\n                ]\n            } ]\n        }\n    }\n    // Get real-time call stats\n    if (requestType == 'getStatistics') {\n        params = {\n            'service': 'getStatistics',\n            'settings': [ {\n                'statisticType': 'ACDStatus'\n            } ]\n        }\n    }\n\n    return params;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/public/javascript/api.js","\n// Send out an error alert in console and on the page.\nexport function error(err, message='') {\n    // timestamp\n    let newDate = new Date();\n    newDate.setTime(Date.now());\n    let dateString = newDate.toTimeString();\n    console.log(dateString);\n\n    // Post to page\n    $('#message').text(`Whoops! An error occurred. ${err.message} ${message}`);\n    console.log('Error log:');\n    console.error(err);\n}\n\n// Nicely formatted time\nexport function formatAMPM(date) {\n    let hours = date.getHours();\n    let minutes = date.getMinutes();\n    let seconds = date.getSeconds();\n    let ampm = hours >= 12 ? 'PM' : 'AM';\n    hours = hours % 12;\n    hours = hours ? hours : 12; // the hour '0' should be '12'\n    minutes = minutes < 10 ? '0'+minutes : minutes;\n    seconds = seconds < 10 ? '0'+seconds : seconds;\n    let strTime = hours + ':' + minutes + ':' + seconds + ' ' + ampm;\n    return strTime;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/public/javascript/utility.js","export const API_URL = 'https://nathanclonts.com/dashboard/api/';\n\n\n\n// WEBPACK FOOTER //\n// ./src/public/javascript/local_settings.js"],"sourceRoot":""}